(this.webpackJsonpmycroft=this.webpackJsonpmycroft||[]).push([[0],{16:function(e){e.exports=JSON.parse("{}")},42:function(e,t,a){e.exports={formWrapper:"LoginForm_formWrapper__3uzRr",formSignin:"LoginForm_formSignin__1E3CM",checkbox:"LoginForm_checkbox__39TGO","form-control":"LoginForm_form-control__2Bhgs",footer:"LoginForm_footer__1vOqs"}},43:function(e,t,a){e.exports={formWrapper:"RegisterForm_formWrapper__1weup",formRegister:"RegisterForm_formRegister__1b8AC",checkbox:"RegisterForm_checkbox__2yFwt","form-control":"RegisterForm_form-control__1ZTWX",footer:"RegisterForm_footer__21xEE"}},62:function(e,t,a){e.exports={navLogo:"NavigationBar_navLogo__3KQFf"}},63:function(e,t,a){e.exports=a(94)},68:function(e,t,a){},69:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(35),o=a.n(l),s=(a(68),a(69),a(6)),i=a(19),c=a(10),m=a(11),u=a(8),h=a(13),g=a(12),p=a(42),d=a.n(p),_=a(7),f=a(14),b=a(30),E=a(5),k=a(41),v=a(15),C=a.n(v),y=a(16),w=function(e,t){return C.a.post("/api/login",{username:e,password:t},y)},O=function(e,t){return C.a.post("/api/register",{username:e,password:t},y)},S=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",error_message:""},n.inputChangeHandler=n.inputChangeHandler.bind(Object(u.a)(n)),n.formSubmitHandler=n.formSubmitHandler.bind(Object(u.a)(n)),n}return Object(m.a)(a,[{key:"inputChangeHandler",value:function(e){var t=e.target,a=t.name,n=t.value;""!==this.state.error_message&&this.setState({error_message:""}),this.setState(Object(i.a)({},a,n))}},{key:"formSubmitHandler",value:function(e){var t=this;e.preventDefault();var a=this.state.username,n=this.state.password;""!==this.state.error_message&&this.setState({error_message:""}),w(a,n).then((function(e){localStorage.setItem("auth_token",e.data.access_token),localStorage.setItem("username",a),t.props.history.push("/triggers")})).catch((function(e){t.setState({error_message:e.response.data.exception||"Invalid Username or Password"})}))}},{key:"render",value:function(){var e=""===this.state.error_message?null:r.a.createElement(k.a,{variant:"danger"},this.state.error_message);return r.a.createElement("div",{className:d.a.formWrapper},r.a.createElement(E.a,{id:"login-form",className:d.a.formSignin,onSubmit:this.formSubmitHandler},r.a.createElement(b.a,{className:"mb-4",alt:"Mycroft - Water",src:"/assets/logo.png"}),r.a.createElement("h1",{className:"h3 mb-3"},"Mycroft"),e,r.a.createElement(E.a.Label,{htmlFor:"inputUsername",srOnly:!0},"Username"),r.a.createElement(E.a.Control,{type:"text",id:"inputUsername",name:"username",placeholder:"Username",required:!0,autoFocus:!0,value:this.state.username,onChange:this.inputChangeHandler}),r.a.createElement(E.a.Label,{htmlFor:"inputPassword",srOnly:!0},"Password"),r.a.createElement(E.a.Control,{type:"password",id:"inputPassword",name:"password",placeholder:"Password",required:!0,value:this.state.password,onChange:this.inputChangeHandler}),r.a.createElement(f.a,{type:"submit",block:!0,size:"lg"},"Sign in"),r.a.createElement(_.b,{to:"/register"},"Create an new account"),r.a.createElement("p",{className:"mt-3 mb-3 text-muted "+d.a.footer},"Team Water")))}}]),a}(n.Component),H=Object(s.f)(S),j=a(43),N=a.n(j),F=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",error_message:""},n.inputChangeHandler=n.inputChangeHandler.bind(Object(u.a)(n)),n.formSubmitHandler=n.formSubmitHandler.bind(Object(u.a)(n)),n}return Object(m.a)(a,[{key:"inputChangeHandler",value:function(e){var t=e.target,a=t.name,n=t.value;""!==this.state.error_message&&this.setState({error_message:""}),this.setState(Object(i.a)({},a,n))}},{key:"formSubmitHandler",value:function(e){var t=this;e.preventDefault();var a=this.state.username,n=this.state.password;""!==this.state.error_message&&this.setState({error_message:""}),O(a,n).then((function(e){w(a,n).then((function(e){localStorage.setItem("auth_token",e.data.access_token),localStorage.setItem("username",a),t.props.history.push("/triggers")}))})).catch((function(e){t.setState({error_message:e.response.data.exception||"Invalid Username or Password"})}))}},{key:"render",value:function(){var e=""===this.state.error_message?null:r.a.createElement(k.a,{variant:"danger"},this.state.error_message);return r.a.createElement("div",{className:N.a.formWrapper},r.a.createElement(E.a,{id:"register-form",className:N.a.formRegister,onSubmit:this.formSubmitHandler},r.a.createElement(b.a,{className:"mb-4",alt:"Mycroft - Water",src:"/assets/logo.png"}),r.a.createElement("h1",{className:"h3 mb-3"},"Mycroft"),e,r.a.createElement(E.a.Label,{htmlFor:"inputUsername",srOnly:!0},"Username"),r.a.createElement(E.a.Control,{type:"text",id:"inputUsername",name:"username",placeholder:"Username",required:!0,autoFocus:!0,value:this.state.username,onChange:this.inputChangeHandler}),r.a.createElement(E.a.Label,{htmlFor:"inputPassword",srOnly:!0},"Password"),r.a.createElement(E.a.Control,{type:"password",id:"inputPassword",name:"password",placeholder:"Password",required:!0,value:this.state.password,onChange:this.inputChangeHandler}),r.a.createElement(f.a,{type:"submit",block:!0,size:"lg"},"Create an account"),r.a.createElement(_.b,{to:"/login"},"Sign in with an existing user"),r.a.createElement("p",{className:"mt-3 mb-3 text-muted "+N.a.footer},"Team Water")))}}]),a}(n.Component),T=Object(s.f)(F),L=function(e){return e.children},x=a(36),D=a(62),I=a.n(D),z=a(49),W=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).logoutClickHandler=function(e){localStorage.removeItem("username"),localStorage.removeItem("auth_token"),n.props.history.push("/login")},n.username=localStorage.getItem("username"),n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(x.a,{bg:"dark",variant:"dark"},r.a.createElement(x.a.Brand,null,r.a.createElement(b.a,{src:"/assets/logo.png",alt:"Mycroft - Water",className:"mr-2 "+I.a.navLogo}),"Mycroft"),r.a.createElement(x.a.Toggle,{"aria-controls":""}),r.a.createElement(x.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(z.a,{className:"mr-auto"},r.a.createElement(_.c,{to:"/triggers",className:"text-light",activeClassName:"active"},"Triggers"),r.a.createElement(_.c,{to:"/operations",className:"text-light ml-4",activeClassName:"active"},"Operations"),r.a.createElement(_.c,{to:"/tasks",className:"text-light ml-4",activeClassName:"active"},"Tasks")),r.a.createElement(z.a,null,r.a.createElement(x.a.Text,{className:"mr-3"},"Sign in as ",r.a.createElement("strong",null,this.username)),r.a.createElement(f.a,{variant:"info",onClick:this.logoutClickHandler},"Logout"))))}}]),a}(n.Component),M=Object(s.f)(W),q=a(32),U=a(24),P=function(e,t){return Object(U.a)(Object(U.a)({},e),{},{headers:{Authorization:"Bearer ".concat(t)}})},R=function(){return C.a.get("api/tasks",P(y,localStorage.getItem("auth_token")))},A=function(e){return C.a.post("api/tasks",e,P(y,localStorage.getItem("auth_token")))},B=function(e){return C.a.delete("api/tasks/"+e,P(y,localStorage.getItem("auth_token")))},J=a(25),Z=a(31),G=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).taskTableHeaders=["#","Name","Actions"],n.state={tasks:[],new_task_name:"",new_task_triggers:[],new_task_operations:{},new_task_triggers_str:"[]",new_task_operations_str:"{}"},n.inputChangeHandler=n.inputChangeHandler.bind(Object(u.a)(n)),n.formSubmitHandler=n.formSubmitHandler.bind(Object(u.a)(n)),n.taskDeleteClickHandler=n.taskDeleteClickHandler.bind(Object(u.a)(n)),n}return Object(m.a)(a,[{key:"inputChangeHandler",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(i.a)({},a,n))}},{key:"componentDidMount",value:function(){var e=this;R().then((function(t){e.setState({tasks:t.data.tasks})}))}},{key:"formSubmitHandler",value:function(e){var t=this;e.preventDefault();var a=this.state.new_task_name,n=JSON.parse(this.state.new_task_triggers_str),r=JSON.parse(this.state.new_task_operations_str);A({name:a,triggers:n,operations:r}).then((function(e){R().then((function(e){t.setState({tasks:e.data.tasks})}))}))}},{key:"taskDeleteClickHandler",value:function(e){var t=this,a=e.target.parentElement.parentElement.children[1].innerHTML;B(a).then((function(e){R().then((function(e){t.setState({tasks:e.data.tasks})}))}))}},{key:"render",value:function(){var e=this,t=this.state.tasks.map((function(t,a){return r.a.createElement("tr",{key:"task_row_"+a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement(f.a,{size:"sm",onClick:e.taskDeleteClickHandler},"Delete")))}));return r.a.createElement("div",{className:"pt-3"},r.a.createElement("h4",null,"Task List"),r.a.createElement(J.a,null,r.a.createElement(Z.a,{className:"task-table",striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,this.taskTableHeaders.map((function(e){return r.a.createElement("th",{key:"header_"+e},e)})))),r.a.createElement("tbody",null,t))),r.a.createElement("h4",null,"Create a New Task"),r.a.createElement(E.a,{id:"create-task-form",onSubmit:this.formSubmitHandler},r.a.createElement(E.a.Group,{as:J.a,controlId:"formTaskName"},r.a.createElement(E.a.Label,{htmlFor:"task-name"},"Name"),r.a.createElement(E.a.Control,{type:"text",id:"task-name",name:"new_task_name",placeholder:"Task Name",required:!0,value:this.state.new_task_name,onChange:this.inputChangeHandler}),r.a.createElement(E.a.Label,{htmlFor:"task_triggers"},"Triggers"),r.a.createElement(E.a.Control,{type:"text",id:"task-triggers",name:"new_task_triggers_str",placeholder:"Task Triggers",required:!0,value:this.state.new_task_triggers_str,onChange:this.inputChangeHandler}),r.a.createElement(E.a.Label,{htmlFor:"task-operations"},"Operations"),r.a.createElement(E.a.Control,{type:"text",id:"task-operations",name:"new_task_operations_str",placeholder:"Task Operations",required:!0,value:this.state.new_task_operations_str,onChange:this.inputChangeHandler})),r.a.createElement(f.a,{type:"submit",size:"lg"},"Create")))}}]),a}(n.Component),V=Object(s.f)(G),K=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(L,null,r.a.createElement(M,null),r.a.createElement(q.a,null,r.a.createElement(V,null)))}}]),a}(n.Component),Q=Object(s.f)(K),X=function(){return C.a.get("api/triggers",P(y,localStorage.getItem("auth_token")))},$=function(e){return C.a.post("api/triggers",e,P(y,localStorage.getItem("auth_token")))},Y=function(e){return C.a.delete("api/triggers/"+e,P(y,localStorage.getItem("auth_token")))},ee=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).triggerTableHeaders=["#","Name","Type","Actions"],n.state={triggers:[],new_trigger_name:"",new_trigger_type:"Schedule",new_trigger_schedule_time:"00:00",new_trigger_schedule_repeat:"day"},n.inputChangeHandler=n.inputChangeHandler.bind(Object(u.a)(n)),n.formSubmitHandler=n.formSubmitHandler.bind(Object(u.a)(n)),n.triggerDeleteClickHandler=n.triggerDeleteClickHandler.bind(Object(u.a)(n)),n}return Object(m.a)(a,[{key:"inputChangeHandler",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(i.a)({},a,n))}},{key:"componentDidMount",value:function(){var e=this;X().then((function(t){e.setState({triggers:t.data.triggers})}))}},{key:"getFormOtherFields",value:function(){switch(this.state.new_trigger_type){case"Schedule":return r.a.createElement(L,null,r.a.createElement(E.a.Label,{htmlFor:"trigger-schedule-time",className:"pt-4"},"Time"),r.a.createElement(E.a.Control,{type:"time",id:"trigger-schedule-time",name:"new_trigger_schedule_time",value:this.state.new_trigger_schedule_time,onChange:this.inputChangeHandler}),r.a.createElement(E.a.Label,{htmlFor:"trigger-schedule-repeat",className:"pt-4"},"Repeat"),r.a.createElement(E.a.Control,{as:"select",id:"trigger-schedule-repeat",name:"new_trigger_schedule_repeat",value:this.state.new_trigger_schedule_repeat,onChange:this.inputChangeHandler},r.a.createElement("option",null,"Day"),r.a.createElement("option",null,"Week")))}return null}},{key:"getDocumentOtherFields",value:function(e){switch(e){case"Schedule":return{time:this.state.new_trigger_schedule_time,repeat:this.state.new_trigger_schedule_repeat.toLowerCase()}}}},{key:"formSubmitHandler",value:function(e){var t=this;e.preventDefault();var a=this.state.new_trigger_name,n=this.state.new_trigger_type,r=this.getDocumentOtherFields(n),l=Object(U.a)({name:a,type:n.toLowerCase()},r);$(l).then((function(e){X().then((function(e){t.setState({triggers:e.data.triggers})}))}))}},{key:"triggerDeleteClickHandler",value:function(e){var t=this,a=e.target.parentElement.parentElement.children[1].innerHTML;Y(a).then((function(e){X().then((function(e){t.setState({triggers:e.data.triggers})}))}))}},{key:"render",value:function(){var e=this,t=this.state.triggers.map((function(t,a){return r.a.createElement("tr",{key:"trigger_row_"+a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.type.charAt(0).toUpperCase()+t.type.slice(1)),r.a.createElement("td",null,r.a.createElement(f.a,{size:"sm",onClick:e.triggerDeleteClickHandler},"Delete")))})),a=this.getFormOtherFields();return r.a.createElement("div",{className:"pt-3"},r.a.createElement("h4",null,"Trigger List"),r.a.createElement(J.a,null,r.a.createElement(Z.a,{className:"trigger-table",striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,this.triggerTableHeaders.map((function(e){return r.a.createElement("th",{key:"header_"+e},e)})))),r.a.createElement("tbody",null,t))),r.a.createElement("h4",null,"Create a New Trigger"),r.a.createElement(E.a,{id:"create-trigger-form",onSubmit:this.formSubmitHandler},r.a.createElement(E.a.Group,{as:J.a,controlId:"formTriggerName"},r.a.createElement(E.a.Label,{htmlFor:"trigger-name"},"Name"),r.a.createElement(E.a.Control,{type:"text",id:"trigger-name",name:"new_trigger_name",placeholder:"Trigger Name",required:!0,value:this.state.new_trigger_name,onChange:this.inputChangeHandler}),r.a.createElement(E.a.Label,{htmlFor:"trigger-type",className:"pt-4"},"Type"),r.a.createElement(E.a.Control,{as:"select",id:"trigger-type",name:"new_trigger_type",defaultValue:"Choose...",required:!0,value:this.state.new_trigger_type,onChange:this.inputChangeHandler},r.a.createElement("option",null,"Schedule")),a),r.a.createElement(f.a,{type:"submit",size:"lg"},"Create")))}}]),a}(n.Component),te=Object(s.f)(ee),ae=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(L,null,r.a.createElement(M,null),r.a.createElement(q.a,null,r.a.createElement(te,null)))}}]),a}(n.Component),ne=Object(s.f)(ae),re=function(){return C.a.get("api/operations",P(y,localStorage.getItem("auth_token")))},le=function(e){return C.a.post("api/operations",e,P(y,localStorage.getItem("auth_token")))},oe=function(e){return C.a.delete("api/operations/"+e,P(y,localStorage.getItem("auth_token")))},se=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).operationTableHeaders=["#","Name","Type","Actions"],n.state={operations:[],new_operation_name:"",new_operation_type:"Zoom",new_operation_zoom_link:""},n.inputChangeHandler=n.inputChangeHandler.bind(Object(u.a)(n)),n.operationDeleteClickHandler=n.operationDeleteClickHandler.bind(Object(u.a)(n)),n.formSubmitHandler=n.formSubmitHandler.bind(Object(u.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;re().then((function(t){e.setState({operations:t.data.operations})}))}},{key:"inputChangeHandler",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(i.a)({},a,n))}},{key:"operationDeleteClickHandler",value:function(e){var t=this,a=e.target.parentElement.parentElement.children[1].innerHTML;oe(a).then((function(e){re().then((function(e){t.setState({operations:e.data.operations})}))}))}},{key:"formSubmitHandler",value:function(e){var t=this;e.preventDefault();var a=this.state.new_operation_name,n=this.state.new_operation_type,r=this.getDocumentOtherFields(n),l=Object(U.a)({name:a,type:n.toLowerCase()},r);le(l).then((function(e){re().then((function(e){t.setState({operations:e.data.operations})}))}))}},{key:"getFormOtherFields",value:function(){switch(this.state.new_operation_type){case"Zoom":return r.a.createElement(L,null,r.a.createElement(E.a.Label,{htmlFor:"operation-zoom-link",className:"pt-4"},"Link"),r.a.createElement(E.a.Control,{type:"text",id:"operation-zoom-link",name:"new_operation_zoom_link",value:this.state.new_operation_zoom_link,onChange:this.inputChangeHandler}))}}},{key:"getDocumentOtherFields",value:function(e){switch(e){case"Zoom":return{link:this.state.new_operation_zoom_link}}}},{key:"render",value:function(){var e=this,t=this.state.operations.map((function(t,a){return r.a.createElement("tr",{key:"operation_row_"+a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.type.charAt(0).toUpperCase()+t.type.slice(1)),r.a.createElement("td",null,r.a.createElement(f.a,{size:"sm",onClick:e.operationDeleteClickHandler},"Delete")))})),a=this.getFormOtherFields();return r.a.createElement("div",{className:"pt-3"},r.a.createElement("h4",null,"Operation List"),r.a.createElement(J.a,null,r.a.createElement(Z.a,{className:"operation-table",striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,this.operationTableHeaders.map((function(e){return r.a.createElement("th",{key:"header_"+e},e)})))),r.a.createElement("tbody",null,t))),r.a.createElement("h4",null,"Create a New Operation"),r.a.createElement(E.a,{id:"create-operation-form",onSubmit:this.formSubmitHandler},r.a.createElement(E.a.Group,{as:J.a,controlId:"formOperationName"},r.a.createElement(E.a.Label,{htmlFor:"operation-name"},"Name"),r.a.createElement(E.a.Control,{type:"text",id:"operation-name",name:"new_operation_name",placeholder:"Operation Name",required:!0,value:this.state.new_operation_name,onChange:this.inputChangeHandler}),r.a.createElement(E.a.Label,{htmlFor:"operation-type",className:"pt-4"},"Type"),r.a.createElement(E.a.Control,{as:"select",id:"operation-type",name:"new_operation_type",defaultValue:"Choose...",required:!0,value:this.state.new_operation_type,onChange:this.inputChangeHandler},r.a.createElement("option",null,"Zoom")),a),r.a.createElement(f.a,{type:"submit",size:"lg"},"Create")))}}]),a}(n.Component),ie=Object(s.f)(se),ce=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(L,null,r.a.createElement(M,null),r.a.createElement(q.a,null,r.a.createElement(ie,null)))}}]),a}(n.Component),me=Object(s.f)(ce);var ue=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0},r.a.createElement(H,null)),r.a.createElement(s.a,{path:"/login"},r.a.createElement(H,null)),r.a.createElement(s.a,{path:"/register"},r.a.createElement(T,null)),r.a.createElement(s.a,{path:"/triggers"},r.a.createElement(ne,null)),r.a.createElement(s.a,{path:"/operations"},r.a.createElement(me,null)),r.a.createElement(s.a,{path:"/tasks"},r.a.createElement(Q,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(93);var he=r.a.createElement(_.a,null,r.a.createElement(ue,null));o.a.render(r.a.createElement(r.a.StrictMode,null,he),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.8bb65737.chunk.js.map